(this["webpackJsonpreactjs-firebase"]=this["webpackJsonpreactjs-firebase"]||[]).push([[0],{31:function(e,t,a){},35:function(e,t,a){e.exports=a(54)},40:function(e,t,a){},50:function(e,t,a){},52:function(e,t,a){},54:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(18),o=a.n(s),i=(a(40),a(34)),c=a(2),l=a(8),u=a(14),p=a(33),d=a(15),m={isLogin:!1,isLoading:!1,user:{},userNotes:{}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;return"CHANGE_ISLOGIN"===t.type?Object(d.a)({},e,{isLogin:t.value}):"CHANGE_USER"===t.type?Object(d.a)({},e,{user:t.value}):"CHANGE_LOADING"===t.type?Object(d.a)({},e,{isLoading:t.value}):"SET_NOTES"===t.type?Object(d.a)({},e,{userNotes:t.value}):e},f=Object(u.c)(h,Object(u.a)(p.a)),g=a(5),v=a(6),b=a(7),N=a(9),E=a(10),y=a(21),C=a.n(y);a(45),a(47);C.a.initializeApp({apiKey:"AIzaSyDQPq6FTRyiFUBotlBDWMLZ4JshBMq7UDU",authDomain:"simple-notes-firebase-848a7.firebaseapp.com",databaseURL:"https://simple-notes-firebase-848a7.firebaseio.com",projectId:"simple-notes-firebase-848a7",storageBucket:"simple-notes-firebase-848a7.appspot.com",messagingSenderId:"687823214905",appId:"1:687823214905:web:53a8c1cd82bc1e1cb3f0e8",measurementId:"G-RXT4ZNLYSW"});var A=C.a.database(),O=C.a,I=(a(50),function(e){Object(E.a)(a,e);var t=Object(N.a)(a);function a(){var e;Object(v.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={title:"",content:"",isUpdate:!1,nodeId:""},e.handleInputChange=function(t){t.preventDefault(),e.setState(Object(g.a)({},t.target.name,t.target.value))},e.handleFormSubmit=function(){var t=e.state,a=t.title,n=t.content,r=t.isUpdate,s=t.nodeId,o=e.props,i=o.saveDataAPI,c=o.updateDataAPI,l=o.history,u=(new Date).getTime(),p=JSON.parse(localStorage.getItem("userData"));if(null===p)l.push("/login");else{var d={title:a,content:n,date:u,uid:p.uid};r?(d.noteId=s,c(d),e.resetState()):(i(d),e.resetState())}},e.handleNoteUpdate=function(t,a){e.setState({title:t.title,content:t.content,isUpdate:!0,nodeId:a})},e.handleNoteDelete=function(t,a){t.preventDefault(),t.stopPropagation();var n=e.props,r=n.deleteDataAPI,s=n.history,o=JSON.parse(localStorage.getItem("userData"));null!==o?r(o.uid,a):s.push("/login")},e.resetState=function(){e.setState({title:"",content:"",isUpdate:!1,nodeId:""})},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e,t=this.props,a=t.getDataAPI,n=t.history;null===(e=JSON.parse(localStorage.getItem("userData")))?n.push("/login"):a(e.uid)}},{key:"render",value:function(){var e=this,t=this.props.userNotes,a=this.state,s=a.title,o=a.content,i=a.isUpdate;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"input-form"},r.a.createElement("input",{placeholder:"title",className:"input-title",value:s,name:"title",onChange:function(t){return e.handleInputChange(t)}}),r.a.createElement("textarea",{placeholder:"content",className:"input-content",value:o,name:"content",onChange:function(t){return e.handleInputChange(t)}}),r.a.createElement("div",{className:"btn-wrapper"},i?r.a.createElement("button",{className:"cancel-btn",onClick:this.resetState},"Cancel"):null,r.a.createElement("button",{className:"save-btn",onClick:this.handleFormSubmit},i?"Update":"Simpan"))),t.length>0?r.a.createElement(n.Fragment,null,t.map((function(t){return r.a.createElement("div",{className:"card-content",key:t.key,onClick:function(){return e.handleNoteUpdate(t.data,t.key)}},r.a.createElement("span",{className:"close",onClick:function(a){return e.handleNoteDelete(a,t.key)}},"\xd7"),r.a.createElement("p",{className:"title"},t.data.title),r.a.createElement("p",{className:"date"},t.data.date),r.a.createElement("p",{className:"content"},t.data.content))}))):null)}}]),a}(n.Component)),S=Object(l.b)((function(e){return{userNotes:e.userNotes}}),(function(e){return{saveDataAPI:function(t){return e(function(e){return function(t){A.ref("notes/"+e.uid).push({title:e.title,date:e.date,content:e.content})}}(t))},getDataAPI:function(t){return e(function(e){return function(t){var a=A.ref("notes/"+e);return new Promise((function(e,n){a.on("value",(function(a){var n=[];null!==a.val()&&(Object.keys(a.val()).map((function(e){return n.push({key:e,data:a.val()[e]})})),t({type:"SET_NOTES",value:n}),e(n))}))}))}}(t))},updateDataAPI:function(t){return e(function(e){return function(t){var a=A.ref("notes/".concat(e.uid,"/").concat(e.noteId));return new Promise((function(t,n){a.set({title:e.title,date:e.date,content:e.content},(function(e){e?n(!1):t(!0)}))}))}}(t))},deleteDataAPI:function(t,a){return e(function(e,t){return function(a){var n=A.ref("notes/".concat(e,"/").concat(t));return new Promise((function(e,t){n.remove()}))}}(t,a))}}}))(I),w=a(12),L=a.n(w),j=a(20),k=function(e){var t=e.title,a=e.onClick,n="Register"===t?"":"login";return e.loading?r.a.createElement("button",{className:"btn disable "+n,onClick:a},"Loading ..."):r.a.createElement("button",{className:"btn "+n,onClick:a},t)},D=(a(31),a(52),function(e){Object(E.a)(a,e);var t=Object(N.a)(a);function a(){var e;Object(v.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).handlePopupClosed=function(){e.props.isAlertClosed(!0)},e}return Object(b.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{id:"popup1",className:"overlay"},r.a.createElement("div",{className:"popup"},r.a.createElement("h2",null,"Notification"),r.a.createElement("span",{className:"close",onClick:this.handlePopupClosed},"\xd7"),r.a.createElement("div",{className:"content"},this.props.popupMessage)))}}]),a}(n.Component)),P=function(e){Object(E.a)(a,e);var t=Object(N.a)(a);function a(){var e;Object(v.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:"",popupMessage:""},e.handleChangeText=function(t){e.setState(Object(g.a)({},t.target.name,t.target.value))},e.handleLoginSubmit=Object(j.a)(L.a.mark((function t(){var a,n,r,s;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state,n=a.email,r=a.password,s=e.props.LoginAPI,t.prev=2,t.next=5,s({email:n,password:r});case 5:t.sent?e.handleAfterSubmit("Login Success!"):e.handleAfterSubmit("Login Failed!"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),e.handleAfterSubmit(t.t0);case 12:case"end":return t.stop()}}),t,null,[[2,9]])}))),e.handleAfterSubmit=function(t){e.setState({popupMessage:t})},e.handleAlertClose=function(t){var a=e.props.history;if(t&&e.setState({email:"",password:"",popupMessage:""}),e.props.isLogin){var n=JSON.stringify(e.props.user);localStorage.setItem("userData",n),a.push("/")}},e}return Object(b.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(n.Fragment,null,""!==this.state.popupMessage?r.a.createElement(D,{popupMessage:this.state.popupMessage,isAlertClosed:function(t){return e.handleAlertClose(t)}}):null,r.a.createElement("div",{className:"auth-container"},r.a.createElement("div",{className:"auth-card"},r.a.createElement("p",{className:"auth-title"},"Login Page"),r.a.createElement("input",{name:"email",className:"input",placeholder:"Email",value:this.state.email,type:"text",onChange:this.handleChangeText,disabled:this.props.isLoading}),r.a.createElement("input",{name:"password",className:"input",placeholder:"Password",type:"password",value:this.state.password,onChange:this.handleChangeText,disabled:this.props.isLoading}),r.a.createElement(k,{onClick:this.handleLoginSubmit,title:"Login",loading:this.props.isLoading}))))}}]),a}(n.Component),G=Object(l.b)((function(e){return{isLoading:e.isLoading,isLogin:e.isLogin,user:e.user}}),(function(e){return{LoginAPI:function(t){return e(function(e){return function(t){return new Promise((function(a,n){return t({type:"CHANGE_LOADING",value:!0}),O.auth().signInWithEmailAndPassword(e.email,e.password).then((function(e){var n={email:e.user.email,emailVerified:e.user.emailVerified,uid:e.user.uid};t({type:"CHANGE_LOADING",value:!1}),t({type:"CHANGE_ISLOGIN",value:!0}),t({type:"CHANGE_USER",value:n}),a(!0)})).catch((function(e){var a=e.message;t({type:"CHANGE_LOADING",value:!1}),t({type:"CHANGE_ISLOGIN",value:!1}),n(a)}))}))}}(t))}}}))(P),x=function(e){Object(E.a)(a,e);var t=Object(N.a)(a);function a(){var e;Object(v.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:""},e.handleChangeText=function(t){e.setState(Object(g.a)({},t.target.name,t.target.value))},e.handleRegisterSubmit=Object(j.a)(L.a.mark((function t(){var a,n,r;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.state,n=a.email,r=a.password,e.props.registerAPI({email:n,password:r}).catch((function(e){return e}))?console.log("Register success!"):console.log("Register failed!");case 3:case"end":return t.stop()}}),t)}))),e}return Object(b.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"auth-container"},r.a.createElement("div",{className:"auth-card"},r.a.createElement("p",{className:"auth-title"},"Register Page"),r.a.createElement("input",{name:"email",className:"input",placeholder:"Email",type:"text",onChange:this.handleChangeText,disabled:this.props.isLoading}),r.a.createElement("input",{name:"password",className:"input",placeholder:"Password",type:"password",onChange:this.handleChangeText,disabled:this.props.isLoading}),r.a.createElement(k,{onClick:this.handleRegisterSubmit,title:"Register",loading:this.props.isLoading})))}}]),a}(n.Component),U=Object(l.b)((function(e){return{isLoading:e.isLoading}}),(function(e){return{registerAPI:function(t){return e(function(e){return function(t){return new Promise((function(a,n){t({type:"CHANGE_LOADING",value:!0}),O.auth().createUserWithEmailAndPassword(e.email,e.password).then((function(e){console.log("register success: ",e),t({type:"CHANGE_LOADING",value:!1}),a(!0)})).catch((function(e){var a=e.code,r=e.message;console.log(a,r),t({type:"CHANGE_LOADING",value:!1}),n(!1)}))}))}}(t))}}}))(x);var _=function(){return r.a.createElement(l.a,{store:f},r.a.createElement(i.a,null,r.a.createElement(c.a,{path:"/",exact:!0,component:S}),r.a.createElement(c.a,{path:"/login",component:G}),r.a.createElement(c.a,{path:"/register",component:U})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(_,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[35,1,2]]]);
//# sourceMappingURL=main.57e6e892.chunk.js.map